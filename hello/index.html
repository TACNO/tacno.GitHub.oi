<html>
  <head>
    <meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>这是一个测试 | Tang</title>
<link rel="shortcut icon" href="https://cnoo.eu.org/favicon.ico?v=1672996868317">
<link href="https://cdn.jsdelivr.net/npm/remixicon@2.3.0/fonts/remixicon.css" rel="stylesheet">
<link rel="stylesheet" href="https://cnoo.eu.org/styles/main.css">
<link rel="alternate" type="application/atom+xml" title="这是一个测试 | Tang - Atom Feed" href="https://cnoo.eu.org/atom.xml">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Droid+Serif:400,700">


<script async src="https://www.googletagmanager.com/gtag/js?id=G-N3ZDYGVLKP"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-N3ZDYGVLKP');
</script>


    <meta name="description" content="
This is a test



'use strict'
/**

static files (404.html, sw.js, conf.js)
/
const ASSET_URL = 'https://hunshcn.github..." />
    <meta name="keywords" content="hello" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">
    <script src="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.5.1/build/highlight.min.js"></script>
  </head>
  <body>
    <div class="main">
      <div class="main-content">
        <div class="site-header">
  <a href="https://cnoo.eu.org">
  <img class="avatar" src="https://cnoo.eu.org/images/avatar.png?v=1672996868317" alt="">
  </a>
  <h1 class="site-title">
    Tang
  </h1>
  <p class="site-description">
    CNOO.EU.ORG
  </p>
  <div class="menu-container">
    
      
        <a href="https://cnoo.eu.org/" class="menu">
          首页
        </a>
      
    
      
        <a href="/archives" class="menu">
          归档
        </a>
      
    
      
        <a href="/about" class="menu">
          关于
        </a>
      
    
  </div>
  <div class="social-container">
    
      
        <a href="https://github.com/TACNO" target="_blank">
          <i class="ri-github-line"></i>
        </a>
      
    
      
    
      
    
      
    
      
    
  </div>
</div>

        <div class="post-detail">
          <article class="post">
            <h2 class="post-title">
              这是一个测试
            </h2>
            <div class="post-info">
              <span>
                2022-09-05
              </span>
              <span>
                4 min read
              </span>
              
                <a href="https://cnoo.eu.org/9qbEfBwq8/" class="post-tag">
                  # hello
                </a>
              
            </div>
            
              <img class="post-feature-image" src="https://cnoo.eu.org/post-images/hello.png" alt="">
            
            <div class="post-content-wrapper">
              <div class="post-content" v-pre>
                <!-- more -->
<p>This is a test</p>
<!-- more -->
<p><img src="https://cnoo.eu.org/post-images/1669122066336.png" alt="" loading="lazy"><br>
<img src="https://cnoo.eu.org/post-images/1669122119240.png" alt="" loading="lazy"><br>
'use strict'</p>
<p>/**</p>
<ul>
<li>static files (404.html, sw.js, conf.js)<br>
<em>/<br>
const ASSET_URL = 'https://hunshcn.github.io/gh-proxy/'<br>
// 前缀，如果自定义路由为example.com/gh/</em>，将PREFIX改为 '/gh/'，注意，少一个杠都会错！<br>
const PREFIX = '/h/'<br>
// 分支文件使用jsDelivr镜像的开关，0为关闭，默认关闭<br>
const Config = {<br>
jsdelivr: 0<br>
}</li>
</ul>
<p>const whiteList = [] // 白名单，路径里面有包含字符的才会通过，e.g. ['/username/']</p>
<p>/** @type {RequestInit} <em>/<br>
const PREFLIGHT_INIT = {<br>
status: 204,<br>
headers: new Headers({<br>
'access-control-allow-origin': '</em>',<br>
'access-control-allow-methods': 'GET,POST,PUT,PATCH,TRACE,DELETE,HEAD,OPTIONS',<br>
'access-control-max-age': '1728000',<br>
}),<br>
}</p>
<p>const exp1 = /^(?:https?://)?github.com/.+?/.+?/(?:releases|archive)/.<em><span class='katex-error' title='ParseError: KaTeX parse error: Undefined control sequence: \/ at position 29: … = /^(?:https?:\̲/̲\/)?github\.com…'>/i
const exp2 = /^(?:https?:\/\/)?github\.com\/.+?\/.+?\/(?:blob|raw)\/.*</span>/i<br>
const exp3 = /^(?:https?://)?github.com/.+?/.+?/(?:info|git-).</em><span class='katex-error' title='ParseError: KaTeX parse error: Undefined control sequence: \/ at position 29: … = /^(?:https?:\̲/̲\/)?raw\.(?:git…'>/i
const exp4 = /^(?:https?:\/\/)?raw\.(?:githubusercontent|github)\.com\/.+?\/.+?\/.+?\/.+</span>/i<br>
const exp5 = /^(?:https?://)?gist.(?:githubusercontent|github).com/.+?/.+?/.+<span class='katex-error' title='ParseError: KaTeX parse error: Undefined control sequence: \/ at position 29: … = /^(?:https?:\̲/̲\/)?github\.com…'>/i
const exp6 = /^(?:https?:\/\/)?github\.com\/.+?\/.+?\/tags.*</span>/i</p>
<p>/**</p>
<ul>
<li>@param {any} body</li>
<li>@param {number} status</li>
<li>@param {Object&lt;string, string&gt;} headers<br>
<em>/<br>
function makeRes(body, status = 200, headers = {}) {<br>
headers['access-control-allow-origin'] = '</em>'<br>
return new Response(body, {status, headers})<br>
}</li>
</ul>
<p>/**</p>
<ul>
<li>@param {string} urlStr<br>
*/<br>
function newUrl(urlStr) {<br>
try {<br>
return new URL(urlStr)<br>
} catch (err) {<br>
return null<br>
}<br>
}</li>
</ul>
<p>addEventListener('fetch', e =&gt; {<br>
const ret = fetchHandler(e)<br>
.catch(err =&gt; makeRes('cfworker error:\n' + err.stack, 502))<br>
e.respondWith(ret)<br>
})</p>
<p>function checkUrl(u) {<br>
for (let i of [exp1, exp2, exp3, exp4, exp5, exp6]) {<br>
if (u.search(i) === 0) {<br>
return true<br>
}<br>
}<br>
return false<br>
}</p>
<p>/**</p>
<ul>
<li>@param {FetchEvent} e<br>
*/<br>
async function fetchHandler(e) {<br>
const req = e.request<br>
const urlStr = req.url<br>
const urlObj = new URL(urlStr)<br>
let path = urlObj.searchParams.get('q')<br>
if (path) {<br>
return Response.redirect('https://' + urlObj.host + PREFIX + path, 301)<br>
}<br>
// cfworker 会把路径中的 <code>//</code> 合并成 <code>/</code><br>
path = urlObj.href.substr(urlObj.origin.length + PREFIX.length).replace(/^https?:/+/, 'https://')<br>
if (path.search(exp1) === 0 || path.search(exp5) === 0 || path.search(exp6) === 0 || path.search(exp3) === 0 || path.search(exp4) === 0) {<br>
return httpHandler(req, path)<br>
} else if (path.search(exp2) === 0) {<br>
if (Config.jsdelivr) {<br>
const newUrl = path.replace('/blob/', '@').replace(/^(?:https?://)?github.com/, 'https://cdn.jsdelivr.net/gh')<br>
return Response.redirect(newUrl, 302)<br>
} else {<br>
path = path.replace('/blob/', '/raw/')<br>
return httpHandler(req, path)<br>
}<br>
} else if (path.search(exp4) === 0) {<br>
const newUrl = path.replace(/(?&lt;=com/.+?/.+?)/(.+?/)/, '@$1').replace(/^(?:https?://)?raw.(?:githubusercontent|github).com/, 'https://cdn.jsdelivr.net/gh')<br>
return Response.redirect(newUrl, 302)<br>
} else {<br>
return fetch(ASSET_URL + path)<br>
}<br>
}</li>
</ul>
<p>/**</p>
<ul>
<li>
<p>@param {Request} req</p>
</li>
<li>
<p>@param {string} pathname<br>
*/<br>
function httpHandler(req, pathname) {<br>
const reqHdrRaw = req.headers</p>
<p>// preflight<br>
if (req.method === 'OPTIONS' &amp;&amp;<br>
reqHdrRaw.has('access-control-request-headers')<br>
) {<br>
return new Response(null, PREFLIGHT_INIT)<br>
}</p>
<p>const reqHdrNew = new Headers(reqHdrRaw)</p>
<p>let urlStr = pathname<br>
let flag = !Boolean(whiteList.length)<br>
for (let i of whiteList) {<br>
if (urlStr.includes(i)) {<br>
flag = true<br>
break<br>
}<br>
}<br>
if (!flag) {<br>
return new Response(&quot;blocked&quot;, {status: 403})<br>
}<br>
if (urlStr.startsWith('github')) {<br>
urlStr = 'https://' + urlStr<br>
}<br>
const urlObj = newUrl(urlStr)</p>
<p>/** @type {RequestInit} */<br>
const reqInit = {<br>
method: req.method,<br>
headers: reqHdrNew,<br>
redirect: 'manual',<br>
body: req.body<br>
}<br>
return proxy(urlObj, reqInit)<br>
}</p>
</li>
</ul>
<p>/**<br>
*</p>
<ul>
<li>
<p>@param {URL} urlObj</p>
</li>
<li>
<p>@param {RequestInit} reqInit<br>
*/<br>
async function proxy(urlObj, reqInit) {<br>
const res = await fetch(urlObj.href, reqInit)<br>
const resHdrOld = res.headers<br>
const resHdrNew = new Headers(resHdrOld)</p>
<p>const status = res.status</p>
<p>if (resHdrNew.has('location')) {<br>
let _location = resHdrNew.get('location')<br>
if (checkUrl(_location))<br>
resHdrNew.set('location', PREFIX + _location)<br>
else {<br>
reqInit.redirect = 'follow'<br>
return proxy(newUrl(_location), reqInit)<br>
}<br>
}<br>
resHdrNew.set('access-control-expose-headers', '<em>')<br>
resHdrNew.set('access-control-allow-origin', '</em>')</p>
<p>resHdrNew.delete('content-security-policy')<br>
resHdrNew.delete('content-security-policy-report-only')<br>
resHdrNew.delete('clear-site-data')</p>
<p>return new Response(res.body, {<br>
status,<br>
headers: resHdrNew,<br>
})<br>
}</p>
</li>
</ul>
<iframe src="https://802plw-my.sharepoint.com/personal/t_cnoo_eu_org/_layouts/15/embed.aspx?UniqueId=1b9b5e90-8261-46b4-942a-92987ed59843&embed=%7B%22hvm%22%3Atrue%2C%22ust%22%3Atrue%7D&referrer=OneUpFileViewer&referrerScenario=EmbedDialog.Create" width="560" height="315" frameborder="0" scrolling="no" allowfullscreen title="测试1（ZZZ）.mp4"></iframe>

              </div>
              <div class="toc-container">
                
              </div>
            </div>
          </article>
        </div>

        

        

        <div class="site-footer">
  
  <a class="rss" href="https://cnoo.eu.org/atom.xml" target="_blank">
    <i class="ri-rss-line"></i> RSS
  </a>
</div>

      </div>
    </div>

    <script>
      hljs.initHighlightingOnLoad()

      let mainNavLinks = document.querySelectorAll(".markdownIt-TOC a");

      // This should probably be throttled.
      // Especially because it triggers during smooth scrolling.
      // https://lodash.com/docs/4.17.10#throttle
      // You could do like...
      // window.addEventListener("scroll", () => {
      //    _.throttle(doThatStuff, 100);
      // });
      // Only not doing it here to keep this Pen dependency-free.

      window.addEventListener("scroll", event => {
        let fromTop = window.scrollY;

        mainNavLinks.forEach((link, index) => {
          let section = document.getElementById(decodeURI(link.hash).substring(1));
          let nextSection = null
          if (mainNavLinks[index + 1]) {
            nextSection = document.getElementById(decodeURI(mainNavLinks[index + 1].hash).substring(1));
          }
          if (section.offsetTop <= fromTop) {
            if (nextSection) {
              if (nextSection.offsetTop > fromTop) {
                link.classList.add("current");
              } else {
                link.classList.remove("current");    
              }
            } else {
              link.classList.add("current");
            }
          } else {
            link.classList.remove("current");
          }
        });
      });

    </script>
  </body>
</html>
